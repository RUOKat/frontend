# Are You Okat? - 고양이 건강 기록 앱

> 오늘도 괜찮은지, 기록으로 먼저 알아봐요.

## 프로젝트 개요

고양이 집사를 위한 건강 기록 및 진단 앱입니다. 매일의 건강 상태를 기록하고, 설문 기반 진단을 통해 잠재적인 건강 문제를 조기에 발견할 수 있도록 돕습니다.

## 기술 스택

- **프레임워크**: Next.js 16 (App Router)
- **UI**: React 19, Tailwind CSS 4, Radix UI
- **언어**: TypeScript
- **인증**: AWS Cognito
- **유효성 검사**: Zod, React Hook Form
- **분석**: Vercel Analytics, Prometheus

---

## 기능 요구사항

### 1. 인증 시스템 (Authentication)

#### 1.1 회원가입
- 사용자는 이메일과 비밀번호로 회원가입할 수 있다
- 회원가입 후 이메일 인증(OTP)을 완료해야 한다

#### 1.2 로그인/로그아웃
- 사용자는 이메일과 비밀번호로 로그인할 수 있다
- 로그인 시 세션 토큰(accessToken, idToken, refreshToken)이 발급된다
- 사용자는 로그아웃하여 세션을 종료할 수 있다

#### 1.3 계정 관리
- 사용자는 비밀번호를 변경할 수 있다
- 사용자는 계정을 삭제할 수 있다

#### 1.4 WebView 지원
- React Native 앱에서 WebView로 접근 시 네이티브 앱과 연동된다
- 푸시 토큰 전송 및 로그아웃 요청이 네이티브 앱으로 전달된다

---

### 2. 고양이 프로필 관리 (Cat Profile)

#### 2.1 프로필 등록
- 사용자는 여러 마리의 고양이를 등록할 수 있다
- 필수 정보: 이름, 성별, 중성화 여부, 품종, 체중, 사료 종류, 급수 방식
- 선택 정보: 생년월일, BCS, 활동 수준, 생활 환경, 의료 이력

#### 2.2 프로필 관리
- 사용자는 등록된 고양이 프로필을 수정할 수 있다
- 사용자는 고양이 프로필을 삭제할 수 있다
- 활성 고양이를 선택하여 전환할 수 있다

#### 2.3 데이터 동기화
- 프로필 데이터는 백엔드와 자동 동기화된다
- 오프라인 시 로컬 스토리지에 저장 후 온라인 시 동기화된다

#### 2.4 보호소 연동
- 입양 경로가 보호소인 경우 데이터 공유 옵션을 설정할 수 있다
- 공유 수준: signal(신호만), summary(요약), full(전체)

---

### 3. 온보딩 시스템 (Onboarding)

#### 3.1 초기 설정
- 신규 사용자는 온보딩 플로우를 통해 고양이 정보를 입력한다
- 필수/선택 동의 화면을 거친다

#### 3.2 초기 건강 설문
- 고양이의 현재 건강 상태에 대한 기본 설문을 진행한다
- 설문 결과에 따라 후속 질문이 생성된다

#### 3.3 위험도 평가
- 설문 답변을 기반으로 초기 위험도를 평가한다
- 위험도 수준: 정상, 주의, 확인 필요

---

### 4. 데일리 케어 (Daily Care)

#### 4.1 체크인
- 사용자는 매일 고양이의 건강 상태를 체크인할 수 있다
- 체크인 팝업을 통해 빠르게 기록할 수 있다

#### 4.2 월간 케어 기록
- 캘린더 뷰로 월간 참여 기록을 확인할 수 있다
- 완료된 날짜에는 스탬프가 표시된다
- 참여율 통계를 확인할 수 있다

#### 4.3 설문 스케줄
- 요일별로 설문 스케줄을 설정할 수 있다
- 스케줄된 날짜에 설문 알림을 받을 수 있다

---

### 5. 진단 설문 (Diagnostic Survey)

#### 5.1 카테고리별 질문
- FLUTD: 비뇨기 관련 질문
- CKD: 신장 관련 질문
- GI: 소화기 관련 질문
- PAIN: 통증 관련 질문

#### 5.2 동적 질문 생성
- 이전 답변에 따라 후속 질문이 동적으로 생성된다
- 백엔드에서 질문 목록을 가져온다

#### 5.3 위험도 평가
- 답변 기반으로 위험도를 계산한다
- 결과에 따른 권장 사항을 제공한다

---

### 6. 건강 기록 (Health Records)

#### 6.1 일일 기록
- 소변 횟수, 대변 횟수 및 상태
- 음식 섭취량, 물 섭취량
- 활동 수준
- 구토 여부 및 횟수
- 메모

#### 6.2 기록 조회
- 최근 기록 목록을 확인할 수 있다
- 월별로 그룹화된 히스토리를 조회할 수 있다
- 개별 기록의 상세 내용을 확인할 수 있다

#### 6.3 기록 수정
- 기존 기록을 수정할 수 있다
- 오늘 기록이 있으면 수정 모드로 진입한다

---

### 7. 일일 리포트 (Daily Reports)

#### 7.1 리포트 생성
- 진단 설문 완료 시 자동으로 일일 리포트가 생성된다
- 리포트에는 상태 요약과 권장 사항이 포함된다

#### 7.2 리포트 조회
- 리포트 목록을 확인할 수 있다
- 상태 뱃지로 위험도를 한눈에 파악할 수 있다
- 개별 리포트의 상세 내용을 확인할 수 있다

---

### 8. 알림 시스템 (Notifications)

#### 8.1 푸시 알림
- WebView 환경에서 Expo Push Token을 등록한다
- 설문 리마인더, 건강 알림 등을 푸시로 받는다

#### 8.2 알림 관리
- 최근 7일간의 알림 목록을 확인할 수 있다
- 알림을 읽음 처리할 수 있다
- 알림을 삭제할 수 있다
- 읽지 않은 알림 개수가 뱃지로 표시된다

---

### 9. 설정 (Settings)

#### 9.1 사용자 프로필
- 사용자 정보를 확인하고 수정할 수 있다

#### 9.2 고양이 프로필
- 등록된 고양이 프로필을 관리할 수 있다

#### 9.3 알림 설정
- 알림 수신 여부를 설정할 수 있다

---

### 10. 기타 기능

#### 10.1 진료 기록
- 동물병원 방문 기록을 저장할 수 있다
- 진단명, 처방, 다음 방문일 등을 기록한다

#### 10.2 웹캠 모니터링
- 웹캠을 통해 고양이를 모니터링할 수 있다

#### 10.3 오늘의 팁
- 고양이 건강 관련 토막 상식을 제공한다
- 관련 읽을거리 링크를 제공한다

---

## 페이지 구조

```
app/
├── (portal)/                 # 메인 포털 (인증 필요)
│   ├── page.tsx             # 홈 (대시보드)
│   ├── record/              # 기록
│   │   ├── page.tsx         # 기록 목록
│   │   └── new/             # 새 기록
│   ├── history/             # 히스토리
│   │   ├── page.tsx         # 히스토리 목록
│   │   └── [id]/            # 기록 상세
│   ├── reports/             # 리포트
│   │   ├── page.tsx         # 리포트 목록
│   │   └── [id]/            # 리포트 상세
│   ├── settings/            # 설정
│   │   ├── page.tsx         # 설정 메인
│   │   └── profile/         # 프로필 설정
│   ├── vet-history/         # 진료 기록
│   ├── monitoring/          # 모니터링
│   └── webcam/              # 웹캠
├── auth/                     # 인증
│   ├── sign-in/             # 로그인
│   ├── sign-up/             # 회원가입
│   ├── sign-out/            # 로그아웃
│   ├── verify/              # 이메일 인증
│   └── callback/            # OAuth 콜백
├── onboarding/              # 온보딩
│   ├── cat/                 # 고양이 정보 입력
│   ├── consent/             # 동의
│   ├── questions/           # 초기 설문
│   └── follow-up/           # 후속 질문
├── api/                     # API 라우트
│   ├── auth/                # 인증 API
│   └── account/             # 계정 API
└── metrics/                 # 메트릭스
```

---

## 컨텍스트 구조

```
contexts/
├── auth-context.tsx         # 인증 상태 관리
├── active-cat-context.tsx   # 활성 고양이 관리
├── onboarding-context.tsx   # 온보딩 상태 관리
├── cat-profile-context.tsx  # 고양이 프로필 폼 상태
└── webview-context.tsx      # WebView 환경 감지
```

---

## 백엔드 API 모듈

```
lib/
├── backend.ts               # 기본 fetch 래퍼
├── backend-auth.ts          # 인증 API
├── backend-care.ts          # 케어/설문 API
├── backend-pets.ts          # 펫 관리 API
├── backend-users.ts         # 사용자 API
├── backend-notifications.ts # 알림 API
└── backend-uploads.ts       # 파일 업로드 API
```
